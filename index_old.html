<script>

  let element = document.getElementById('select');
  let valueToSelect = httpGetCamera('/getSelectedCam');
  element.value = valueToSelect;
  alert(element.value);

  function httpGetCamera(theUrl) {
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open("GET", theUrl, false); // false for synchronous request
    xmlHttp.send(null);
    return xmlHttp.responseText;
  }

  document.addEventListener("DOMContentLoaded", function (event) {
    // Находим необходимые HTML теги
    var txtEdit = document.getElementById('txtEdit');
    var btn = document.getElementById('btnSend');
    var filename;
    if (txtEdit && btn) {
      // Получаем содержимое файла с сервера
      ajax('GET', '/get-file?file=', null, function (resData) {
        txtEdit.value = resData;
      });

      // Отправляем данные на сервер
      btn.addEventListener('click', function (event) {
        event.preventDefault();
        ajax('POST', '/update-file', { "data": txtEdit.value }, function (result) {
          if (result) {
            alert('File updated');
          }
          else {
            alert('Update error');
          }
        });
      });
    }
  });

  // перезагрузка
  document.addEventListener("DOMContentLoaded", function (event) {
    var btn = document.getElementById('btnReboot');
    btn.addEventListener('click', function (event) {
      event.preventDefault();
      ajax('GET', '/btnReboot', null, function (result) {
        alert('Success');
      });
    });
  });

  // выполнение консольных команд
  document.addEventListener("DOMContentLoaded", function (event) {
    var btnConf = document.getElementById('btnConf');
    btnConf.addEventListener('click', function (event) {
      event.preventDefault();
      var xhttp = new XMLHttpRequest();
      var slct = document.getElementById("select");
      var strUser = slct.options[slct.selectedIndex].text;
      alert(strUser);
      ajax('POST', '/btnConf', { strUser }, { "Content-Type": "application/json" }, function (result) {
        if (result) {
          // alert(result);
          alert('File updated');
        }
        else {
          alert('Update error');
        }
      });
    });
  });

  function ajax(method, url, data, cb) {
    var xhr = new XMLHttpRequest();
    xhr.open(method, url, true);
    if (method == 'POST') {
      xhr.setRequestHeader("Content-Type", "application/json; charset=utf-8");
    }
    xhr.onreadystatechange = function () {
      if (xhr.readyState == XMLHttpRequest.DONE) {
        if (xhr.status >= 200 && xhr.status < 300) {
          if (method == 'GET') {
            xhr.responseText;
          }
          else if (method == 'POST') {
            return true;
          }
        }
        else {
          return false;
        }
      }
    };
    if (data) {
      xhr.send(JSON.stringify(data));
    }
    else {
      xhr.send();
    }
  }
</script>